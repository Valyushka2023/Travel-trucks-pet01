import{P as n,r as o,j as e,C as ne,u as se,a as ie,b as E,g as O}from"./index-CqdJaE3x.js";import{u as oe,C as re,S as ae,s as ce}from"./ClipLoader-g10q0tdV.js";import{B as $,H as le}from"./Button-HUUo_K0X.js";import{F as de}from"./FeatureIcon-B6O-f2NV.js";import{v as ue}from"./v4-CmTdKEVZ.js";const pe=i=>{var s;return((s=i.campers)==null?void 0:s.items)||[]},_e=i=>i.campers.isLoading,fe=i=>i.campers.error,he="_inputWrapper_lf1lk_1",xe="_scaleWrapper_lf1lk_6",me="_selected_lf1lk_23",ve="_iconMap_lf1lk_32",ge="_locationDisplay_lf1lk_45",Ce="_dropdownList_lf1lk_55",je="_dropdownItem_lf1lk_70",ye="_selectedItem_lf1lk_82",Ie="_filterContainer_lf1lk_89",we="_filterTitle_lf1lk_92",C={inputWrapper:he,scaleWrapper:xe,selected:me,iconMap:ve,locationDisplay:ge,dropdownList:Ce,dropdownItem:je,selectedItem:ye,filterContainer:Ie,filterTitle:we},V=({campers:i,location:s,setLocation:a})=>{const[u,p]=o.useState([]),[m,t]=o.useState(!1),_=o.useRef(null);o.useEffect(()=>{if(i&&i.length>0){const c=Array.from(new Set(i.map(f=>f.location)));p(c)}},[i]),o.useEffect(()=>{const c=f=>{_.current&&!_.current.contains(f.target)&&t(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]);const d=c=>{a(c),t(!1)},x=()=>{t(!m)},v=s!=="all",b=s==="all"?"All locations":s;return e.jsxs("div",{className:C.inputWrapper,ref:_,children:[" ",e.jsxs("div",{className:`${C.scaleWrapper} ${v?C.selected:""}`,onClick:x,children:[e.jsx("svg",{className:C.iconMap,width:"20",height:"20",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-map"})}),e.jsxs("div",{className:C.locationDisplay,children:[" ",b]})]}),m&&e.jsxs("div",{className:C.dropdownList,children:[e.jsx("div",{className:`${C.dropdownItem} ${s==="all"?C.selectedItem:""}`,onClick:()=>d("all"),children:"All locations"}),u.map(c=>e.jsx("div",{className:`${C.dropdownItem} ${s===c?C.selectedItem:""}`,onClick:()=>d(c),children:c},c))]})]})};V.propTypes={campers:n.array.isRequired,setLocation:n.func.isRequired,location:n.string};const Te="_filterTitle_rkucl_1",be="_vehicleEquipment_rkucl_13",Ne="_textEquipment_rkucl_20",Le="_divider_rkucl_30",ke="_equipmentContainer_rkucl_40",qe="_rawIcon_rkucl_48",Se="_active_rkucl_64",Fe="_icon_rkucl_75",$e="_iconText_rkucl_82",y={filterTitle:Te,vehicleEquipment:be,textEquipment:Ne,divider:Le,equipmentContainer:ke,rawIcon:qe,active:Se,icon:Fe,iconText:$e},A=[{icon:"AC",label:"AC",ariaLabel:"Кондиціонер",type:"boolean"},{icon:"transmission",label:"Automatic",ariaLabel:"Автоматична коробка передач",type:"string"},{icon:"kitchen",label:"Kitchen",ariaLabel:"Кухня",type:"boolean"},{icon:"TV",label:"TV",ariaLabel:"Телевізор",type:"boolean"},{icon:"bathroom",label:"Bathroom",ariaLabel:"Ванна кімната",type:"boolean"}],P=({onFilter:i,currentFilters:s})=>{const a=o.useRef();o.useEffect(()=>{JSON.stringify(s)!==JSON.stringify(a.current)&&p(s)},[s]),o.useEffect(()=>{a.current=s});const[u,p]=o.useState(s),m=(t,_)=>{const d={...u},x=A.find(v=>v.icon===t);if(_==="string"){const v=d[t]===x.label?null:x.label;d[t]=v}else _==="boolean"&&(d[t]=!d[t]);p(d),i(d)};return e.jsxs("div",{className:y.vehicleEquipment,children:[e.jsx("h3",{className:y.textEquipment,children:"Vehicle equipment"}),e.jsx("hr",{className:y.divider}),e.jsx("div",{className:y.equipmentContainer,children:A.map(t=>e.jsxs("button",{className:`${y.rawIcon} ${t.label.includes(" ")?y.multiLine:""} ${t.type==="boolean"&&s[t.icon]||t.type==="string"&&s[t.icon]===t.label?y.active:""}`,"aria-label":t.ariaLabel,onClick:()=>m(t.icon,t.type),children:[e.jsx("svg",{className:y.icon,children:e.jsx("use",{href:`/icons.svg#icon-icon-button-${t.icon}`})}),e.jsx("span",{className:y.iconText,children:t.label})]},t.icon))})]})};P.propTypes={onFilter:n.func.isRequired,currentFilters:n.object.isRequired};const Re="_vehicleType_3znl2_1",Be="_textType_3znl2_10",Me="_divider_3znl2_20",Ee="_typeContainer_3znl2_30",ze="_rawIcon_3znl2_40",Oe="_active_3znl2_57",Ae="_icon_3znl2_68",Ve="_multiLine_3znl2_75",Pe="_iconText_3znl2_79",I={vehicleType:Re,textType:Be,divider:Me,typeContainer:Ee,rawIcon:ze,active:Oe,icon:Ae,multiLine:Ve,iconText:Pe},We=[{icon:"van",label:"Van",ariaLabel:"Фургон",isMultiLine:!1},{icon:"fullyIntegrated",label:e.jsxs(e.Fragment,{children:["Fully",e.jsx("br",{}),"Integrated"]}),ariaLabel:"Повністю інтегрований",isMultiLine:!0},{icon:"alcove",label:"Alcove",ariaLabel:"Альтанка",isMultiLine:!1}],W=({onFilter:i,currentFilters:s})=>{const a=o.useRef();o.useEffect(()=>{JSON.stringify(s)!==JSON.stringify(a.current)&&p(s)},[s]),o.useEffect(()=>{a.current=s});const[u,p]=o.useState(s),m=t=>{const _={...u};_[t]=!_[t],p(_),i(_)};return e.jsxs("div",{className:I.vehicleType,children:[e.jsx("h3",{className:I.textType,children:"Vehicle type"}),e.jsx("hr",{className:I.divider}),e.jsx("div",{className:I.typeContainer,children:We.map(t=>e.jsxs("button",{className:`${I.rawIcon} ${t.isMultiLine?I.multiLine:""} ${s[t.icon]?I.active:""}`,"aria-label":t.ariaLabel,onClick:()=>m(t.icon),children:[e.jsx("svg",{className:I.icon,children:e.jsx("use",{href:`/icons.svg#icon-icon-button-${t.icon}`})}),e.jsx("span",{className:I.iconText,children:t.label})]},t.icon))})]})};W.propTypes={onFilter:n.func.isRequired,currentFilters:n.object.isRequired};const De="_card_1g4xe_1",He="_contentCard_1g4xe_14",Je="_image_1g4xe_24",Ue="_containerInfo_1g4xe_34",Ye="_titleInfo_1g4xe_44",Ke="_priceInfo_1g4xe_60",Xe="_textPriceInfo_1g4xe_70",Ge="_iconHeart_1g4xe_78",Qe="_detailsInfo_1g4xe_86",Ze="_reviewsInfo_1g4xe_95",et="_locationInfo_1g4xe_96",tt="_iconStar_1g4xe_111",nt="_iconMap_1g4xe_115",st="_supportingTextInfo_1g4xe_127",it="_textButton_1g4xe_138",ot="_textInfo_1g4xe_144",rt="_badgesContainer_1g4xe_165",at="_containerShowMore_1g4xe_173",ct="_textInfoContainer_1g4xe_180",l={card:De,contentCard:He,image:Je,containerInfo:Ue,titleInfo:Ye,priceInfo:Ke,textPriceInfo:Xe,iconHeart:Ge,detailsInfo:Qe,reviewsInfo:Ze,locationInfo:et,iconStar:tt,iconMap:nt,supportingTextInfo:st,textButton:it,textInfo:ot,badgesContainer:rt,containerShowMore:at,textInfoContainer:ct},lt="_backdropInCard_e4pwi_1",dt="_popupContent_e4pwi_35",ut="_popupCloseButton_e4pwi_91",pt="_descriptionText_e4pwi_107",F={backdropInCard:lt,popupContent:dt,popupCloseButton:ut,descriptionText:pt},D=({description:i,onClose:s})=>{const a=u=>{u.stopPropagation()};return e.jsx("div",{className:F.backdropInCard,onClick:s,children:e.jsxs("div",{className:F.popupContent,onClick:a,children:[e.jsx(ne,{onClick:s,className:F.popupCloseButton,ariaLabel:"Закрити опис"}),e.jsx("p",{className:F.descriptionText,children:i})]})})};D.propTypes={description:n.string.isRequired,onClose:n.func.isRequired};const H=({_id:i,name:s,gallery:a,price:u,description:p,location:m,camper:t})=>{const[_,d]=o.useState(!1),x=se();let v="/default_camper.jpg";a&&Array.isArray(a)&&a.length>0&&(v=a[0]||"/default_camper.jpg");const b=()=>{d(!0)},c=()=>{d(!1)},f=o.useMemo(()=>t!=null&&t.reviews&&Array.isArray(t.reviews)?t.reviews.map(h=>!h._id||t.reviews.filter(T=>T._id===h._id).length>1?{...h,_id:ue()}:{...h}):[],[t==null?void 0:t.reviews]);let w=0;f.length>0&&(w=f.reduce((h,T)=>h+(T.reviewer_rating||0),0)/f.length);const L=()=>{x(`/catalog/${i}`)},N=20,k=o.useMemo(()=>{if(!p)return"";const h=p.split(" ");return h.length<=N?p:h.slice(0,N).join(" ")+"..."},[p]);return e.jsx("div",{className:l.card,"data-id":i,children:e.jsxs("div",{className:l.contentCard,children:[e.jsx("img",{className:l.image,src:v,alt:s}),e.jsxs("div",{className:l.containerInfo,children:[e.jsxs("div",{className:l.titleInfo,children:[e.jsx("h2",{children:s}),e.jsxs("div",{className:l.priceInfo,children:[e.jsxs("h2",{className:l.textPriceInfo,children:["$",u]}),e.jsx("svg",{className:l.iconHeart,width:"26",height:"24",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-heart"})})]})]}),e.jsxs("div",{className:l.detailsInfo,children:[e.jsxs("div",{className:l.reviewsInfo,children:[e.jsx("svg",{className:l.iconStar,width:"16",height:"16",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-star"})}),e.jsx("p",{children:f.length>0?e.jsxs("span",{children:[w.toFixed(1)," (",f.length," ","Reviews)"]}):"0 (0 відгуків)"})]}),e.jsxs("div",{className:l.locationInfo,children:[e.jsx("svg",{className:l.iconMap,width:"16",height:"16",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-map"})}),e.jsx("p",{children:m})]})]}),e.jsx("div",{className:l.supportingTextInfo,children:e.jsx("button",{className:l.textButton,onClick:b,children:e.jsx("p",{className:l.textInfo,children:k})})}),e.jsx("div",{className:l.badgesContainer,children:t&&e.jsx(de,{camper:t})}),e.jsx("div",{className:l.containerShowMore,children:e.jsx($,{onClick:L,variant:"primary",size:"medium",children:"Show More"})}),_&&e.jsx(D,{description:p,onClose:c})]})]})})};H.propTypes={_id:n.string.isRequired,name:n.string.isRequired,gallery:n.arrayOf(n.string),price:n.number.isRequired,description:n.string,location:n.string.isRequired,reviews:n.arrayOf(n.shape({_id:n.string,reviewer_rating:n.number})),features:n.objectOf(n.bool),camper:n.shape({features:n.objectOf(n.bool),reviews:n.arrayOf(n.shape({_id:n.string,reviewer_rating:n.number}))})};const _t="_cardList_1y4ou_1",ft={cardList:_t},J=({campers:i})=>e.jsx("div",{className:ft.cardList,children:i.length===0?e.jsx("div",{children:"No campers available."}):i.map(s=>e.jsx(H,{_id:s._id,name:s.name,gallery:s.gallery,price:s.price,description:s.description,reviews:s.reviews,location:s.location,features:s.features,camper:s},s._id))});J.propTypes={campers:n.arrayOf(n.shape({_id:n.string.isRequired,name:n.string.isRequired,gallery:n.arrayOf(n.string).isRequired,price:n.number.isRequired,description:n.string,location:n.string.isRequired,reviews:n.arrayOf(n.shape({reviewer_rating:n.number})),features:n.objectOf(n.bool)})).isRequired};const ht="_errorContainer_181sl_1",xt="_errorMessage_181sl_9",mt="_retryButton_181sl_14",z={errorContainer:ht,errorMessage:xt,retryButton:mt};function U({error:i,onRetry:s}){return e.jsxs("div",{className:z.errorContainer,children:[e.jsxs("p",{className:z.errorMessage,children:["Виникла помилка: ",i]}),e.jsx("button",{className:z.retryButton,onClick:s,children:"Повторити завантаження"})]})}U.propTypes={error:n.string.isRequired,onRetry:n.func.isRequired};const vt="_container_zspu5_1",gt="_containerCatalog_zspu5_13",Ct="_containerFilters_zspu5_24",jt="_locationTitle_zspu5_31",yt="_filterTitle_zspu5_36",It="_containerCards_zspu5_42",wt="_containerLoadMore_zspu5_55",Tt="_loaderContainer_zspu5_64",bt="_filterButtonsContainer_zspu5_72",Nt="_layout_zspu5_83",j={container:vt,containerCatalog:gt,containerFilters:Ct,locationTitle:jt,filterTitle:yt,containerCards:It,containerLoadMore:wt,loaderContainer:Tt,filterButtonsContainer:bt,layout:Nt};function $t(){const i=o.useRef(null),{visible:s}=oe(300),a=ie(),u=E(pe),p=E(_e),m=E(fe),[t,_]=o.useState([]),[d,x]=o.useState(4),[v,b]=o.useState("all"),[c,f]=o.useState({}),[w,L]=o.useState({}),[N,k]=o.useState("all"),[h,T]=o.useState({}),[q,R]=o.useState({});o.useEffect(()=>{a(O())},[a]);const B=o.useMemo(()=>{if(!u||u.length===0)return[];let r=u;return N!=="all"&&(r=r.filter(g=>g.location===N)),r=r.filter(g=>{for(const M in h){const S=h[M];if(S!=null){if(typeof S=="boolean"){if(!g[M])return!1}else if(typeof S=="string"&&g[M]!==S)return!1}}return!0}),Object.keys(q).some(g=>q[g])&&(r=r.filter(g=>q[g.form])),r},[u,N,h,q]);o.useEffect(()=>{_(B.slice(0,d))},[B,d]);const Y=r=>{b(r),k(r),f({}),L({}),T({}),R({}),x(4),setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},K=r=>{f(r)},X=r=>{L(r)},G=()=>{T(c),R(w),x(4),setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},Q=()=>{b("all"),f({}),L({}),k("all"),T({}),R({}),x(4),setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},Z=()=>{a(O())},ee=()=>{const r=window.scrollY;x(g=>g+4),setTimeout(()=>{window.scrollTo({top:r+window.innerHeight*.7,behavior:"smooth"})},100)},te=()=>{x(4),setTimeout(()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})},50)};return e.jsxs("div",{children:[e.jsx("div",{ref:i}),e.jsxs("div",{className:j.container,children:[e.jsx(le,{}),e.jsxs("div",{className:j.containerCatalog,children:[e.jsxs("div",{className:j.containerFilters,children:[e.jsx("h4",{className:j.locationTitle,children:"Location"}),e.jsx(V,{campers:u,setLocation:Y,location:v}),e.jsx("h4",{className:j.filterTitle,children:"Filters"}),e.jsx(P,{onFilter:K,currentFilters:c}),e.jsx(W,{onFilter:X,currentFilters:w}),e.jsxs("div",{className:j.filterButtonsContainer,children:[e.jsx($,{variant:"primary",size:"medium",onClick:G,children:"Filter out"}),(Object.keys(c).some(r=>c[r])||Object.keys(w).some(r=>w[r])||v!=="all")&&e.jsx($,{variant:"primary",size:"medium",onClick:Q,className:j.clearFiltersButton,children:"Clear Filters"})]})]}),e.jsx("div",{className:j.containerCards,children:p?e.jsx("div",{className:j.loaderContainer,children:e.jsx(re,{color:"#36D7B7",size:50})}):m?e.jsx(U,{error:m,onRetry:Z}):t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(J,{campers:t}),d<B.length&&e.jsx("div",{className:j.containerLoadMore,children:e.jsx($,{variant:"default",size:"small",onClick:ee,children:"Load more"})})]}):e.jsx("div",{children:"No campers available matching your criteria."})})]}),e.jsx(ae,{visible:s,onClick:te,className:ce.fixedPosition})]})]})}export{$t as default};
