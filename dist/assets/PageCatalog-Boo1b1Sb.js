import{P as i,r as o,j as e,C as ne,u as oe,a as re,b as B,g as M,c as ae}from"./index-D2inHSVb.js";import{u as ce,S as le,s as de}from"./ScrollToTopButton-CiX1mJrd.js";import{B as O,H as pe}from"./Button-CZjkuQWG.js";import{u as z}from"./useTranslation-0psHgoRi.js";import{F as ue}from"./FeatureIcon-5pGkLayy.js";import{v as _e}from"./v4-CmTdKEVZ.js";const he=n=>{var t;return((t=n.campers)==null?void 0:t.items)||[]},me=n=>n.campers.isLoading,fe=n=>n.campers.error,ve="_selected_7bolp_22",g={"input-wrapper":"_input-wrapper_7bolp_1","scale-wrapper":"_scale-wrapper_7bolp_6",selected:ve,"icon-map":"_icon-map_7bolp_31","location-display":"_location-display_7bolp_44","dropdown-list":"_dropdown-list_7bolp_54","dropdown-item":"_dropdown-item_7bolp_69","selected-item":"_selected-item_7bolp_81","filter-container":"_filter-container_7bolp_87","filter-title":"_filter-title_7bolp_91"},D=({campers:n,location:t,setLocation:_})=>{const{t:m,i18n:l}=z("filter_location"),[w,r]=o.useState([]),[f,s]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{if(n&&n.length>0){const a=Array.from(new Set(n.map(v=>v.location)));r(a)}},[n]),o.useEffect(()=>{const a=v=>{d.current&&!d.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const u=a=>{_(a),s(!1)},x=()=>{s(!f)},b=t!=="all",q=t==="all"?"All locations":t;return e.jsxs("div",{className:g["input-wrapper"],ref:d,children:[" ",e.jsxs("div",{className:`${g["scale-wrapper"]} ${b?g.selected:""}`,onClick:x,children:[e.jsx("svg",{className:g["icon-map"],width:"20",height:"20",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-map"})}),e.jsxs("div",{className:g["location-display"],children:[" ",q]})]}),f&&e.jsxs("div",{className:g["dropdown-list"],children:[e.jsx("div",{className:`${g["dropdown-item"]} ${t==="all"?g.selectedItem:""}`,onClick:()=>u("all"),children:m("all_locations")}),w.map(a=>e.jsx("div",{className:`${g["dropdown-item"]} ${t===a?g.selectedItem:""}`,onClick:()=>u(a),children:a},a))]})]})};D.propTypes={campers:i.array.isRequired,setLocation:i.func.isRequired,location:i.string};const xe="_divider_7za0u_31",be="_active_7za0u_63",je="_icon_7za0u_72",N={"vehicle-equipment":"_vehicle-equipment_7za0u_13","text-equipment":"_text-equipment_7za0u_20",divider:xe,"equipment-container":"_equipment-container_7za0u_39","raw-icon":"_raw-icon_7za0u_47",active:be,icon:je,"icon-text":"_icon-text_7za0u_79"},P=[{icon:"AC",label:"AC",ariaLabel:"Кондиціонер",type:"boolean"},{icon:"transmission",label:"Automatic",ariaLabel:"Автоматична коробка передач",type:"string"},{icon:"kitchen",label:"Kitchen",ariaLabel:"Кухня",type:"boolean"},{icon:"TV",label:"TV",ariaLabel:"Телевізор",type:"boolean"},{icon:"bathroom",label:"Bathroom",ariaLabel:"Ванна кімната",type:"boolean"}],J=({onFilter:n,currentFilters:t})=>{const{t:_,i18n:m}=z("filter_vehicle_equipment"),l=o.useRef();o.useEffect(()=>{JSON.stringify(t)!==JSON.stringify(l.current)&&r(t)},[t]),o.useEffect(()=>{l.current=t});const[w,r]=o.useState(t),f=(s,d)=>{const u={...w},x=P.find(b=>b.icon===s);if(d==="string"){const b=u[s]===x.label?null:x.label;u[s]=b}else d==="boolean"&&(u[s]=!u[s]);r(u),n(u)};return e.jsxs("div",{className:N["vehicle-equipment"],children:[e.jsx("h3",{className:N["text-equipment"],children:_("vehicle_equipment")}),e.jsx("hr",{className:N.divider}),e.jsx("div",{className:N["equipment-container"],children:P.map(s=>e.jsxs("button",{className:`${N["raw-icon"]} ${s.label.includes(" ")?N.multiLine:""} ${s.type==="boolean"&&t[s.icon]||s.type==="string"&&t[s.icon]===s.label?N.active:""}`,"aria-label":s.ariaLabel,onClick:()=>f(s.icon,s.type),children:[e.jsx("svg",{className:N.icon,children:e.jsx("use",{href:`/icons.svg#icon-icon-button-${s.icon}`})}),e.jsx("span",{className:N["icon-text"],children:s.label})]},s.icon))})]})};J.propTypes={onFilter:i.func.isRequired,currentFilters:i.object.isRequired};const ge="_divider_13b5a_18",ye="_active_13b5a_52",we="_icon_13b5a_61",C={"vehicle-type":"_vehicle-type_13b5a_1","text-type":"_text-type_13b5a_8",divider:ge,"type-container":"_type-container_13b5a_27","raw-icon":"_raw-icon_13b5a_36",active:ye,icon:we,"multi-line":"_multi-line_13b5a_68","icon-text":"_icon-text_13b5a_72"},Ne=[{icon:"van",label:"Van",ariaLabel:"Фургон",isMultiLine:!1},{icon:"fullyIntegrated",label:e.jsxs(e.Fragment,{children:["Fully",e.jsx("br",{}),"Integrated"]}),ariaLabel:"Повністю інтегрований",isMultiLine:!0},{icon:"alcove",label:"Alcove",ariaLabel:"Альтанка",isMultiLine:!1}],H=({onFilter:n,currentFilters:t})=>{const{t:_,i18n:m}=z("filter_vehicle_type"),l=o.useRef();o.useEffect(()=>{JSON.stringify(t)!==JSON.stringify(l.current)&&r(t)},[t]),o.useEffect(()=>{l.current=t});const[w,r]=o.useState(t),f=s=>{const d={...w};d[s]=!d[s],r(d),n(d)};return e.jsxs("div",{className:C["vehicle-type"],children:[e.jsx("h3",{className:C["text-type"],children:_("vehicle_type")}),e.jsx("hr",{className:C.divider}),e.jsx("div",{className:C["type-container"],children:Ne.map(s=>e.jsxs("button",{className:`${C["raw-icon"]} ${s.isMultiLine?C.multiLine:""} ${t[s.icon]?C.active:""}`,"aria-label":s.ariaLabel,onClick:()=>f(s.icon),children:[e.jsx("svg",{className:C.icon,children:e.jsx("use",{href:`/icons.svg#icon-icon-button-${s.icon}`})}),e.jsx("span",{className:C["icon-text"],children:s.label})]},s.icon))})]})};H.propTypes={onFilter:i.func.isRequired,currentFilters:i.object.isRequired};const Ce="_card_jpzbc_1",qe="_image_jpzbc_23",p={card:Ce,"content-card":"_content-card_jpzbc_14",image:qe,"container-info":"_container-info_jpzbc_33","title-info":"_title-info_jpzbc_43","price-info":"_price-info_jpzbc_59","text-price-info":"_text-price-info_jpzbc_69","icon-heart":"_icon-heart_jpzbc_77","details-info":"_details-info_jpzbc_85","reviews-info":"_reviews-info_jpzbc_94","location-info":"_location-info_jpzbc_95","icon-star":"_icon-star_jpzbc_110","icon-map":"_icon-map_jpzbc_114","supporting-text-info":"_supporting-text-info_jpzbc_126","text-button":"_text-button_jpzbc_137","text-info":"_text-info_jpzbc_143","badges-container":"_badges-container_jpzbc_164","container-show-more":"_container-show-more_jpzbc_172","text-info-container":"_text-info-container_jpzbc_179"},S={"backdrop-in-card":"_backdrop-in-card_drwnv_1","popup-content":"_popup-content_drwnv_33","popup-close-button":"_popup-close-button_drwnv_85","description-text":"_description-text_drwnv_99"},W=({description:n,onClose:t})=>{const _=m=>{m.stopPropagation()};return e.jsx("div",{className:S["backdrop-in-card"],onClick:t,children:e.jsxs("div",{className:S["popup-content"],onClick:_,children:[e.jsx(ne,{onClick:t,className:S["popup-close-button"],ariaLabel:"Close description"}),e.jsx("p",{className:S["description-text"],children:n})]})})};W.propTypes={description:i.string.isRequired,onClose:i.func.isRequired};const U=({_id:n,name:t,gallery:_,price:m,description:l,location:w,camper:r})=>{const{t:f}=z(),[s,d]=o.useState(!1),u=oe();let x="/default_camper.jpg";_&&Array.isArray(_)&&_.length>0&&(x=_[0]||"/default_camper.jpg");const b=()=>{d(!0)},q=()=>{d(!1)},a=o.useMemo(()=>r!=null&&r.reviews&&Array.isArray(r.reviews)?r.reviews.map(h=>!h._id||r.reviews.filter(L=>L._id===h._id).length>1?{...h,_id:_e()}:{...h}):[],[r==null?void 0:r.reviews]);let v=0;a.length>0&&(v=a.reduce((h,L)=>h+(L.reviewer_rating||0),0)/a.length);const k=()=>{u(`/catalog/${n}`)},R=20,T=o.useMemo(()=>{if(!l)return"";const h=l.split(" ");return h.length<=R?l:h.slice(0,R).join(" ")+"..."},[l]);return e.jsx("div",{className:p.card,"data-id":n,children:e.jsxs("div",{className:p["content-card"],children:[e.jsx("img",{className:p.image,src:x,alt:t}),e.jsxs("div",{className:p["container-info"],children:[e.jsxs("div",{className:p["title-info"],children:[e.jsx("h2",{children:t}),e.jsxs("div",{className:p["price-info"],children:[e.jsxs("h2",{className:p["text-price-info"],children:["$",m]}),e.jsx("svg",{className:p["icon-heart"],width:"26",height:"24",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-heart"})})]})]}),e.jsxs("div",{className:p["details-info"],children:[e.jsxs("div",{className:p["reviews-info"],children:[e.jsx("svg",{className:p["icon-star"],width:"16",height:"16",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-star"})}),e.jsx("p",{children:a.length>0?e.jsxs("span",{children:[v.toFixed(1)," (",a.length," ","Reviews)"]}):"0 (0 відгуків)"})]}),e.jsxs("div",{className:p["location-info"],children:[e.jsx("svg",{className:p["icon-map"],width:"16",height:"16",viewBox:"0 0 32 32",children:e.jsx("use",{href:"/icons.svg#icon-map"})}),e.jsx("p",{children:w})]})]}),e.jsx("div",{className:p["supporting-text-info"],children:e.jsx("button",{className:p["text-button"],onClick:b,children:e.jsx("p",{className:p["text-info"],children:T})})}),e.jsx("div",{className:p["badges-container"],children:r&&e.jsx(ue,{camper:r})}),e.jsx("div",{className:p["container-show-more"],children:e.jsx(O,{onClick:k,variant:"primary",size:"medium",children:f("show_button",{ns:"button"})})}),s&&e.jsx(W,{description:l,onClose:q})]})]})})};U.propTypes={_id:i.string.isRequired,name:i.string.isRequired,gallery:i.arrayOf(i.string),price:i.number.isRequired,description:i.string,location:i.string.isRequired,reviews:i.arrayOf(i.shape({_id:i.string,reviewer_rating:i.number})),features:i.objectOf(i.bool),camper:i.shape({features:i.objectOf(i.bool),reviews:i.arrayOf(i.shape({_id:i.string,reviewer_rating:i.number}))})};const Le={"card-list":"_card-list_5mkz9_1"},Y=({campers:n})=>e.jsx("div",{className:Le["card-list"],children:n.length===0?e.jsx("div",{children:"No campers available."}):n.map(t=>e.jsx(U,{_id:t._id,name:t.name,gallery:t.gallery,price:t.price,description:t.description,reviews:t.reviews,location:t.location,features:t.features,camper:t},t._id))});Y.propTypes={campers:i.arrayOf(i.shape({_id:i.string.isRequired,name:i.string.isRequired,gallery:i.arrayOf(i.string).isRequired,price:i.number.isRequired,description:i.string,location:i.string.isRequired,reviews:i.arrayOf(i.shape({reviewer_rating:i.number})),features:i.objectOf(i.bool)})).isRequired};const V={"error-container":"_error-container_vvx3p_1","error-message":"_error-message_vvx3p_9","retry-button":"_retry-button_vvx3p_14"};function K({error:n,onRetry:t}){return e.jsxs("div",{className:V["error-container"],children:[e.jsxs("p",{className:V["error-message"],children:["An error occurred: ",n]}),e.jsx("button",{className:V["retry-button"],onClick:t,children:"Retry download"})]})}K.propTypes={error:i.string.isRequired,onRetry:i.func.isRequired};const Re="_container_15tae_1",ke="_layout_15tae_80",y={"container-page":"_container-page_15tae_1",container:Re,"container-catalog":"_container-catalog_15tae_17","container-filters":"_container-filters_15tae_28","location-title":"_location-title_15tae_36","filter-title":"_filter-title_15tae_42","container-cards":"_container-cards_15tae_48","container-load-more":"_container-load-more_15tae_59","filter-buttons-container":"_filter-buttons-container_15tae_68","container-scroll-to-top-button":"_container-scroll-to-top-button_15tae_75",layout:ke};function Ee(){const{t:n}=z(),t=o.useRef(null),{visible:_}=ce(300),m=re(),l=B(he),w=B(me),r=B(fe),[f,s]=o.useState([]),[d,u]=o.useState(4),[x,b]=o.useState("all"),[q,a]=o.useState({}),[v,k]=o.useState({}),[R,T]=o.useState("all"),[h,L]=o.useState({}),[$,E]=o.useState({});o.useEffect(()=>{m(M())},[m]);const A=o.useMemo(()=>{if(!l||l.length===0)return[];let c=l;return R!=="all"&&(c=c.filter(j=>j.location===R)),c=c.filter(j=>{for(const I in h){const F=h[I];if(F!=null){if(typeof F=="boolean"){if(!j[I])return!1}else if(typeof F=="string"&&j[I]!==F)return!1}}return!0}),Object.keys($).some(j=>$[j])&&(c=c.filter(j=>$[j.form])),c},[l,R,h,$]);o.useEffect(()=>{s(A.slice(0,d))},[A,d]);const X=c=>{b(c),T(c),a({}),k({}),L({}),E({}),u(4),setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},G=c=>{a(c)},Q=c=>{k(c)},Z=()=>{L(q),E(v),u(4),setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},ee=()=>{b("all"),a({}),k({}),T("all"),L({}),E({}),u(4),setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50)},te=()=>{m(M())},ie=()=>{const c=window.scrollY;u(j=>j+4),setTimeout(()=>{window.scrollTo({top:c+window.innerHeight*.7,behavior:"smooth"})},100)},se=()=>{u(4),setTimeout(()=>{t.current&&t.current.scrollIntoView({behavior:"smooth",block:"start"})},50)};return e.jsxs("div",{className:y["container-page"],children:[e.jsx("div",{ref:t}),e.jsxs("div",{className:y.container,children:[e.jsx(pe,{}),e.jsxs("div",{className:y["container-catalog"],children:[e.jsxs("div",{className:y["container-filters"],children:[e.jsx("h4",{className:y["location-title"],children:n("location_title",{ns:"catalog"})}),e.jsx(D,{campers:l,setLocation:X,location:x}),e.jsx("h4",{className:y["filter-title"],children:n("filters_title",{ns:"catalog"})}),e.jsx(J,{onFilter:G,currentFilters:q}),e.jsx(H,{onFilter:Q,currentFilters:v}),e.jsxs("div",{className:y["filter-buttons-container"],children:[e.jsx(O,{variant:"primary",size:"medium",onClick:Z,children:n("filter_out_button",{ns:"catalog"})}),(Object.keys(q).some(c=>q[c])||Object.keys(v).some(c=>v[c])||x!=="all")&&e.jsx(O,{variant:"primary",size:"medium",onClick:ee,className:y["clear-filters-button"],children:n("clear_filters_button",{ns:"catalog"})})]})]}),e.jsx("div",{className:y["container-cards"],children:w?e.jsx(ae,{type:"container"}):r?e.jsx(K,{error:r,onRetry:te}):f.length>0?e.jsxs(e.Fragment,{children:[e.jsx(Y,{campers:f}),d<A.length&&e.jsx("div",{className:y["container-load-more"],children:e.jsx(O,{variant:"default",size:"small",onClick:ie,children:n("load_button",{ns:"button"})})})]}):e.jsx("div",{children:n("no_campers_message",{ns:"catalog"})})})]}),e.jsx(le,{visible:_,onClick:se,className:de["fixed-position"],label:n("up_button",{ns:"button"})})]})]})}export{Ee as default};
