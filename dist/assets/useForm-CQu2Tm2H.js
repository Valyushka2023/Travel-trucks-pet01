import{P as a,j as t,r as n,f as O,L as j}from"./index-D2inHSVb.js";import{u as L}from"./useTranslation-0psHgoRi.js";const M="_price_1dw8r_76",u={"container-hero-section":"_container-hero-section_1dw8r_1","reviews-location":"_reviews-location_1dw8r_20","title-reviews":"_title-reviews_1dw8r_27","location-title":"_location-title_1dw8r_28","icon-star":"_icon-star_1dw8r_40","icon-map":"_icon-map_1dw8r_44","text-reviews-title":"_text-reviews-title_1dw8r_56","text-location-title":"_text-location-title_1dw8r_61","container-price":"_container-price_1dw8r_65",price:M};function F({camper:e}){if(!e)return t.jsx("div",{children:"Loading..."});let i=0,o=0;return e.reviews&&e.reviews.length>0&&(i=e.reviews.reduce((s,_)=>s+(_.reviewer_rating||0),0)/e.reviews.length,o=e.reviews.length),t.jsxs("div",{className:u["container-hero-section"],children:[t.jsx("h2",{children:e.name}),t.jsxs("div",{className:u["reviews-location"],children:[t.jsxs("div",{className:u["title-reviews"],children:[t.jsx("svg",{className:u["icon-star"],width:"16",height:"16",viewBox:"0 0 32 32",children:t.jsx("use",{href:"/icons.svg#icon-star"})}),t.jsx("p",{className:u["text-reviews-title"],children:i?`${i.toFixed(1)} (${o} Reviews)`:"No reviews yet"})]}),t.jsxs("div",{className:u["location-title"],children:[t.jsx("svg",{className:u["icon-map"],width:"16",height:"16",viewBox:"0 0 32 32",children:t.jsx("use",{href:"/icons.svg#icon-map"})}),t.jsx("p",{className:u["text-location-title"],children:e.location||"Location not available"})]})]}),t.jsx("div",{className:u["container-price"],children:t.jsxs("h2",{className:u.price,children:["â‚¬",e.price?e.price.toFixed(2):"Price not available"]})})]})}F.propTypes={camper:a.shape({name:a.string.isRequired,location:a.string,price:a.number,reviews:a.arrayOf(a.shape({reviewer_rating:a.number}))})};const T="_active_7rpi6_17",w={"modal-overlay":"_modal-overlay_7rpi6_1",active:T,"modal-content":"_modal-content_7rpi6_21","full-screen-image":"_full-screen-image_7rpi6_32","close-button":"_close-button_7rpi6_39"};function N({imageUrl:e,onClose:i}){n.useEffect(()=>{const s=document.getElementById("fullScreenModalOverlay");return s&&s.classList.add(w.active),()=>{s&&s.classList.remove(w.active)}},[]);const o=s=>{s.target.id==="fullScreenModalOverlay"&&i()};return t.jsx("div",{id:"fullScreenModalOverlay",className:w["modal-overlay"],onClick:o,children:t.jsxs("div",{className:w["modal-content"],children:[t.jsx("img",{src:e,alt:"Full size image",className:w["full-screen-image"]}),t.jsx("button",{className:w["close-button"],onClick:i,children:"Close"})]})})}N.propTypes={imageUrl:a.string.isRequired,onClose:a.func.isRequired};const y={"container-pictures":"_container-pictures_1xb0m_1","gallery-image-button":"_gallery-image-button_1xb0m_14","gallery-item":"_gallery-item_1xb0m_30"};function R({gallery:e}){const[i,o]=n.useState(null),[s,_]=n.useState(!1);if(n.useEffect(()=>{const d=()=>{_(window.innerWidth<=767)};return d(),window.addEventListener("resize",d),()=>{window.removeEventListener("resize",d)}},[]),!Array.isArray(e)||e.length===0)return t.jsx("div",{className:y.noImages,children:"No images available."});const m=d=>{if(s){console.log("Modal window is blocked on mobile devices");return}o(d),document.body.style.overflow="hidden"},f=()=>{o(null),document.body.style.overflow=""};return t.jsxs("div",{className:y["container-pictures"],role:"list","aria-label":"Image Gallery",children:[e.map((d,g)=>t.jsx("button",{className:y["gallery-image-button"],onClick:()=>m(d),"aria-label":`Open image ${g+1}`,children:t.jsx("img",{src:d,alt:`Gallery item ${g+1}`,className:y["gallery-item"],loading:"lazy",onError:v=>{v.target.onerror=null,v.target.src="/placeholder.jpg"}})},g)),i&&t.jsx(N,{imageUrl:i,onClose:f})]})}R.propTypes={gallery:a.arrayOf(a.string).isRequired};const q="_tabs_10m8g_1",z="_active_10m8g_50",b={tabs:q,"titles-tabs":"_titles-tabs_10m8g_23","text-titles-tabs-features":"_text-titles-tabs-features_10m8g_31","text-titles-tabs-reviews":"_text-titles-tabs-reviews_10m8g_32",active:z};function A({camper:e,activeTab:i}){const o=O(),{t:s,i18n:_}=L("tabs"),m=(e==null?void 0:e._id)||(e==null?void 0:e.id);return m?t.jsx("div",{className:b.tabs,children:t.jsxs("div",{className:b["titles-tabs"],children:[t.jsx(j,{to:`/catalog/${m}`,state:{camper:e},className:`${b["text-titles-tabs-features"]} ${o.pathname===`/catalog/${m}`&&i!=="reviews"?b.active:""}`,children:s("features")}),t.jsx(j,{to:`/catalog/${m}/reviews`,state:{camper:e},className:`${b["text-titles-tabs-reviews"]} ${o.pathname===`/catalog/${m}/reviews`&&i==="reviews"?b.active:""}`,children:s("reviews")})]})}):null}A.propTypes={camper:a.shape({_id:a.string,id:a.string}),activeTab:a.string.isRequired};const G=(e,i,o)=>{const[s,_]=n.useState(e),[m,f]=n.useState({}),[d,g]=n.useState(!1),[v,S]=n.useState(!1),[$,p]=n.useState(null),h=n.useCallback((l,r)=>i[l]?i[l](r,s):null,[i,s]),C=n.useCallback(()=>{const l={};return Object.keys(e).forEach(r=>{const c=h(r,s[r]);c&&(l[r]=c)}),f(l),Object.keys(l).length===0},[s,h,e]),E=n.useCallback(l=>{const{name:r,value:c}=l.target;if(_(x=>({...x,[r]:c})),p(null),v){const x=h(r,c);f(k=>({...k,[r]:x}))}},[h,v]),I=n.useCallback((l,r)=>{if(_(c=>({...c,[r]:l})),p(null),v){const c=h(r,l);f(x=>({...x,[r]:c}))}},[h,v]);return{formData:s,errors:m,isSubmitting:d,hasAttemptedSubmit:v,submissionError:$,handleInputChange:E,handleDateChange:I,handleSubmit:async l=>{if(l.preventDefault(),S(!0),!!C()){g(!0),p(null);try{await o(s)}catch(c){p(c.message||"Something went wrong. Please try again.")}finally{g(!1)}}}}};export{F as H,R as I,A as T,G as u};
